<!DOCTYPE html>
<html lang="th">
<head>
<meta charset="UTF-8">
<title>ESP8266 Smart Monitor</title>

<script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-app.js"></script>
<script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-database.js"></script>

<style>
body{
 font-family:Segoe UI;
 background:linear-gradient(135deg,#0f2027,#203a43,#2c5364);
 color:white;
 text-align:center;
 padding:30px;
}
.card{
 background:rgba(255,255,255,0.1);
 backdrop-filter:blur(10px);
 border-radius:15px;
 padding:20px;
 margin:15px auto;
 width:300px;
 box-shadow:0 0 20px rgba(0,0,0,0.3);
}
.value{
 font-size:40px;
 font-weight:bold;
}
.alert{
 background:red;
 padding:10px;
 border-radius:10px;
 margin-top:10px;
 display:none;
}
button{
 padding:10px 20px;
 border:none;
 border-radius:10px;
 font-size:16px;
 cursor:pointer;
}
.on{background:#ff4444;color:white;}
.off{background:#00c851;color:white;}
</style>
</head>

<body>

<h1>üå± Smart Sensor Dashboard</h1>

<div class="card">
 <h3>üå°Ô∏è ‡∏≠‡∏∏‡∏ì‡∏´‡∏†‡∏π‡∏°‡∏¥</h3>
 <div class="value" id="temp">--</div>
</div>

<div class="card">
 <h3>üíß ‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ä‡∏∑‡πâ‡∏ô‡∏î‡∏¥‡∏ô</h3>
 <div class="value" id="soil">--</div>
</div>

<div class="card">
 <h3>‚è∞ ‡πÄ‡∏ß‡∏•‡∏≤</h3>
 <div id="time"></div>
</div>

<div class="card">
 <h3>üîî ‡∏Ñ‡∏ß‡∏ö‡∏Ñ‡∏∏‡∏°‡∏ö‡∏±‡∏™‡πÄ‡∏ã‡∏≠‡∏£‡πå</h3>
 <button class="on" onclick="setAlarm(true)">ON</button>
 <button class="off" onclick="setAlarm(false)">OFF</button>
 <div id="alarmStatus"></div>
</div>

<div id="alertBox" class="alert">
 üî• ‡∏≠‡∏∏‡∏ì‡∏´‡∏†‡∏π‡∏°‡∏¥‡∏™‡∏π‡∏á‡πÄ‡∏Å‡∏¥‡∏ô ‡∏ö‡∏±‡∏™‡πÄ‡∏ã‡∏≠‡∏£‡πå‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏ó‡∏≥‡∏á‡∏≤‡∏ô !
</div>

<script>

/* ===== Firebase Config (‡πÅ‡∏Å‡πâ‡∏Ç‡∏≠‡∏á‡∏°‡∏∂‡∏á) ===== */
const firebaseConfig = {
 apiKey:"APIKEY",
 databaseURL:"https://xxxx-default-rtdb.firebaseio.com/"
};

firebase.initializeApp(firebaseConfig);
const db = firebase.database();

/* ===== ‡∏≠‡πà‡∏≤‡∏ô‡∏Ñ‡πà‡∏≤ Sensor ===== */
db.ref("sensor").on("value",snap=>{
 let data=snap.val();
 if(!data) return;

 document.getElementById("temp").innerHTML=
  data.temperature+" ¬∞C";

 document.getElementById("soil").innerHTML=
  data.soil+" %";

 document.getElementById("alarmStatus").innerHTML=
  data.alarm?"üîî ON":"üîï OFF";

 if(data.temperature>=35){
  document.getElementById("alertBox").style.display="block";
 }else{
  document.getElementById("alertBox").style.display="none";
 }
});

/* ===== ‡∏Å‡∏î‡πÄ‡∏ß‡πá‡∏ö‡∏Ñ‡∏ß‡∏ö‡∏Ñ‡∏∏‡∏° ===== */
function setAlarm(v){
 db.ref("control/alarm").set(v);
}

/* ===== ‡πÄ‡∏ß‡∏•‡∏≤ ===== */
setInterval(()=>{
 let now=new Date();
 document.getElementById("time").innerHTML=
 now.toLocaleString("th-TH");
},1000);

</script>
</body>
</html>

<!DOCTYPE html>
<html lang="th">
<head>
<meta charset="UTF-8">
<title>SMART SENSOR DASHBOARD</title>

<script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-app.js"></script>
<script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-database.js"></script>

<style>
body{
font-family:Segoe UI;
background:linear-gradient(135deg,#1e3c72,#2a5298);
color:white;
text-align:center;
}

.card{
background:white;
color:black;
padding:20px;
margin:15px auto;
width:300px;
border-radius:15px;
box-shadow:0 10px 20px rgba(0,0,0,0.3);
}

.value{
font-size:40px;
font-weight:bold;
}

button{
padding:15px;
border:none;
border-radius:10px;
font-size:18px;
cursor:pointer;
}

.on{background:#ff4444;color:white;}
.off{background:#00c851;color:white;}

.alert{
background:red;
padding:10px;
margin:10px;
border-radius:10px;
display:none;
}
</style>
</head>

<body>

<h1>ğŸŒ± SMART FARM DASHBOARD</h1>

<div id="time"></div>

<div id="alert" class="alert">
ğŸ”¥ à¸­à¸¸à¸“à¸«à¸ à¸¹à¸¡à¸´à¸ªà¸¹à¸‡à¹€à¸à¸´à¸™ !
</div>

<div class="card">
<h2>ğŸŒ¡ï¸ Temperature</h2>
<div id="temp" class="value">--</div>
</div>

<div class="card">
<h2>ğŸ’§ Soil Moisture</h2>
<div id="soil" class="value">--</div>
</div>

<div class="card">
<h2>ğŸš¨ Buzzer</h2>
<div id="alarm" class="value">OFF</div>
</div>

<button id="btn" class="off">à¹€à¸›à¸´à¸” Alarm</button>

<script>

/* ================= FIREBASE ================= */
var firebaseConfig={
apiKey:"AIzaSyC1a-XkNqLQ-fR9K9G3rRq4H3k9SKw9EF0",
databaseURL:"https://kjszz-1a818-default-rtdb.firebaseio.com/"
};

firebase.initializeApp(firebaseConfig);
var db=firebase.database();

/* ===== TIME ===== */
setInterval(()=>{
document.getElementById("time").innerText=
new Date().toLocaleString();
},1000);

/* ===== SENSOR ===== */
db.ref("sensor/temperature").on("value",snap=>{
let t=snap.val();
document.getElementById("temp").innerText=t+" Â°C";

if(t>=50){
document.getElementById("alert").style.display="block";
}else{
document.getElementById("alert").style.display="none";
}
});

db.ref("sensor/soil").on("value",snap=>{
document.getElementById("soil").innerText=snap.val()+" %";
});

db.ref("sensor/alarm").on("value",snap=>{
let v=snap.val();
document.getElementById("alarm").innerText=v?"ON":"OFF";

let btn=document.getElementById("btn");
btn.className=v?"on":"off";
btn.innerText=v?"à¸›à¸´à¸” Alarm":"à¹€à¸›à¸´à¸” Alarm";
});

/* ===== BUTTON ===== */
document.getElementById("btn").onclick=function(){
db.ref("control/alarm").once("value").then(s=>{
db.ref("control/alarm").set(!s.val());
});
};

</script>
</body>
</html>
